<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - AuctionHub</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            background-color: #FFFFFF;
        }

        .content-header {
            margin-left: 250px;
            padding: 20px;
            background-color: #f8f9fa;
            border-bottom: 1px solid #e0e0e0;
        }

        .content-title {
            font-size: 24px;
            color: #121212;
        }

        .content-subtitle {
            font-size: 16px;
            color: #555555;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-left: 100px;
            padding: 20px;
        }

        .stat-card {
            padding: 20px;
            background-color: #121212;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            color: #FFFFFF;
            height: 150px; /* Adjusted height */
            width: 250px; /* Added fixed width */
        }

        .stat-value {
            font-size: 36px;
            font-weight: bold;
            color: #DAA520;
        }

        .stat-label {
            margin-top: 10px;
            font-size: 14px;
            color: #FFFFFF;
            display: flex;
            align-items: center;
            justify-content: center;
        }

            .stat-label i {
                margin-right: 8px;
                color: #DAA520;
            }

        .additional-content {
            margin-left: 250px;
            padding: 20px;
        }

        .chart-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr); /* Ensure 3 charts fit in one row */
            gap: 10px; /* Reduce gap between charts */
            padding: 10px; /* Reduce padding around the container */
            margin-left:-70px;
                  }

        .chart {
            background-color: #121212;
            padding: 15px; /* Reduced padding inside the charts */
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            color: #FFFFFF;
            height: 350px; /* Adjusted height for uniformity */
            overflow: hidden; /* Avoid content overflow */
            width:400px;
            
        }

        .chart-title {
            font-size: 18px;
            color: #DAA520;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>

    <!-- Sidebar -->
    <div style="width: 220px; background-color: #121212; padding: 15px; position: fixed; left: 0; top: 0; height: 100%; color: #FFFFFF;">
        <h3 style="color: #DAA520; text-align: center;">Admin Panel</h3>
        <ul style="list-style-type: none; padding: 0; margin-top: 100px;">
            <li style="margin-bottom: 15px;">
                <a asp-controller="Categories" asp-action="Index" style="display: flex; align-items: center; text-decoration: none; color: #FFFFFF; padding: 10px; border-radius: 5px;">
                    <i class="fas fa-list" style="margin-right: 10px; color: #DAA520;"></i> Manage Categories
                </a>
            </li>
            <li style="margin-bottom: 15px;">
                <a asp-controller="ManageItems" asp-action="Index" style="display: flex; align-items: center; text-decoration: none; color: #FFFFFF; padding: 10px; border-radius: 5px;">
                    <i class="fas fa-box" style="margin-right: 10px; color: #DAA520;"></i> Manage Items
                </a>
            </li>
            <li style="margin-bottom: 15px;">
                <a asp-controller="Item" asp-action="AllItems" style="display: flex; align-items: center; text-decoration: none; color: #FFFFFF; padding: 10px; border-radius: 5px;">
                    <i class="fas fa-list-alt" style="margin-right: 10px; color: #DAA520;"></i> All Items
                </a>
            </li>
            <li style="margin-bottom: 15px;">
                <a asp-controller="Admin" asp-action="Bid" style="display: flex; align-items: center; text-decoration: none; color: #FFFFFF; padding: 10px; border-radius: 5px;">
                    <i class="fas fa-gavel" style="margin-right: 10px; color: #DAA520;"></i> Bid Management
                </a>
            </li>
            <li style="margin-bottom: 15px;">
                <a asp-controller="Reports" asp-action="Index" style="display: flex; align-items: center; text-decoration: none; color: #FFFFFF; padding: 10px; border-radius: 5px;">
                    <i class="fas fa-chart-line" style="margin-right: 10px; color: #DAA520;"></i> Reports
                </a>
            </li>
            <li>
                <a asp-controller="Account" asp-action="Logout" style="display: flex; align-items: center; text-decoration: none; color: #FFFFFF; padding: 10px; border-radius: 5px;">
                    <i class="fas fa-sign-out-alt" style="margin-right: 10px; color: #DAA520;"></i> Logout
                </a>
            </li>
        </ul>
    </div>

    <!-- Stats Grid -->
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-value">245</div>
            <div class="stat-label">
                <i class="fas fa-gavel"></i> Active Auctions
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-value">$128,450</div>
            <div class="stat-label">
                <i class="fas fa-dollar-sign"></i> Total Sales
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-value">1,842</div>
            <div class="stat-label">
                <i class="fas fa-users"></i> Registered Users
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-value">97.3%</div>
            <div class="stat-label">
                <i class="fas fa-check-circle"></i> Success Rate
            </div>
        </div>
    </div>

    <!-- Additional Content -->
    <div class="additional-content">
        
        <div class="chart-container">
            <div class="chart">
                <div class="chart-title">Revenue Trends</div>
                <canvas id="revenueChart"></canvas>
            </div>
           @*  <div class="chart">
                <div class="chart-title">Top Categories</div>
                <canvas id="categoriesChart"></canvas>
            </div> *@
            <div class="chart">
                <div class="chart-title">User Growth</div>
                <canvas id="growthChart"></canvas>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // Revenue Trends Chart
        const ctx1 = document.getElementById('revenueChart').getContext('2d');
        new Chart(ctx1, {
            type: 'line',
            data: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May'],
                datasets: [{
                    label: 'Revenue',
                    data: [1000, 1200, 1800, 2400, 3000],
                    backgroundColor: 'rgba(218, 165, 32, 0.2)',
                    borderColor: '#DAA520',
                    borderWidth: 2
                }]
            }
        });

        // // Top Categories Chart
        // const ctx2 = document.getElementById('categoriesChart').getContext('2d');
        // new Chart(ctx2, {
        //     type: 'pie',
        //     data: {
        //         labels: ['Vehicles', 'Electronics', 'Furniture', 'Jewelry'],
        //         datasets: [{
        //             data: [30, 20, 25, 25],
        //             backgroundColor: ['#DAA520', '#121212', '#FFFFFF', '#888888']
        //         }]
        //     }
        // });

        // User Growth Chart
        const ctx3 = document.getElementById('growthChart').getContext('2d');
        new Chart(ctx3, {
            type: 'bar',
            data: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May'],
                datasets: [{
                    label: 'New Users',
                    data: [50, 75, 150, 200, 300],
                    backgroundColor: '#DAA520',
                    borderColor: '#121212',
                    borderWidth: 1
                }]
            }
        });
    </script>
    [Authorize(Roles = "Admin")]
    public async Task
    <IActionResult>
        AdminDashboard()
        {
        var model = new AdminDashboardViewModel
        {
        PendingItems = await _context.Items
        .Where(i => i.BidStatus == "Pending")
        .CountAsync(),
        ActiveAuctions = await _context.Items
        .Where(i => i.BidStatus == "Active")
        .CountAsync(),
        CompletedTransactions = await _context.Transactions
        .Where(t => t.Status == "Completed")
        .CountAsync(),
        PendingTransactions = await _context.Transactions
        .Where(t => t.Status == "Pending")
        .CountAsync()
        };

        return View(model);
        }
</body>
</html>
